# Bazel configuration for Tyr

# Use bzlmod (Bazel 7+)
common --enable_bzlmod

# C++ configuration
build --cxxopt=-std=c++17
build --host_cxxopt=-std=c++17

# Platform-specific configurations
build:macos --cxxopt=-stdlib=libc++
build:macos --linkopt=-stdlib=libc++

# Local execution for Lean compilation (required)
build --local_resources=cpu=HOST_CPUS

# Increase memory for large compilations
startup --host_jvm_args=-Xmx4g

# Show all test output
test --test_output=all

# Enable verbose failures
build --verbose_failures
